<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pt-6">
    <!-- Summary Card -->
    <mat-card
        class="col-span-full md:col-span-1 bg-gradient-to-tr from-blue-500 to-purple-600 text-white shadow-xl rounded-2xl overflow-hidden relative">
        <div class="absolute top-4 right-4 p-4 opacity-20">
            <mat-icon style="font-size: 8rem; width: 8rem; height: 8rem;">payments</mat-icon>
        </div>
        <mat-card-header>
            <mat-card-title class="text-lg font-medium opacity-90">Total Monthly</mat-card-title>
        </mat-card-header>
        <mat-card-content class="mt-2">
            <h1 class="text-5xl font-bold tracking-tight">{{ totalMonthlyCost | currency:preferredCurrency }}</h1>
        </mat-card-content>
    </mat-card>

    <!-- Subscription Cards -->
    <mat-card *ngFor="let sub of subscriptions"
        class="rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 border border-gray-100 bg-white">
        <mat-card-header class="pb-2">
            <div mat-card-avatar
                [ngClass]="{'bg-purple-100 text-purple-600': sub.category === 'Entertainment', 'bg-blue-100 text-blue-600': sub.category !== 'Entertainment'}"
                class="rounded-xl w-12 h-12 flex items-center justify-center shadow-sm">
                <mat-icon>{{ sub.category === 'Entertainment' ? 'movie' : 'description' }}</mat-icon>
            </div>
            <mat-card-title class="text-lg font-bold text-gray-800">{{ sub.name }}</mat-card-title>
            <mat-card-subtitle class="text-sm font-medium text-gray-500">{{ sub.category }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content class="py-4">
            <div class="flex justify-between items-end">
                <div>
                    <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Next Payment</p>
                    <div class="flex items-center text-gray-700 font-medium mt-1">
                        <mat-icon class="mr-1 text-gray-400"
                            style="font-size: 1.2rem; width: 1.2rem; height: 1.2rem; line-height: 1.2rem;">calendar_today</mat-icon>
                        {{ sub.nextPaymentDate | date:'mediumDate' }}
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-2xl font-extrabold text-gray-900">{{ sub.amount | currency:sub.currency }}</p>
                    <p class="text-xs font-medium text-gray-400 uppercase">/ {{ sub.billingCycle === 0 ? 'Weekly' :
                        (sub.billingCycle === 1 ? 'Monthly' : 'Yearly') }}</p>
                </div>
            </div>
        </mat-card-content>
        <mat-divider></mat-divider>
        <mat-card-actions align="end" class="gap-2 p-3">
            <button mat-button color="primary" (click)="editSubscription(sub)">
                <mat-icon>edit</mat-icon> Edit
            </button>
            <button mat-button color="warn" (click)="deleteSubscription(sub.id)">
                <mat-icon>delete</mat-icon> Delete
            </button>
        </mat-card-actions>
    </mat-card>
</div>

<button mat-fab color="primary" style="position: fixed; bottom: 32px; right: 32px; z-index: 1000;"
    class="shadow-lg hover:shadow-xl transition-all" (click)="openAddSubscriptionDialog()">
    <mat-icon>add</mat-icon>
</button>